<li id="micropost-<%= micropost.id %>">
  <% if micropost.user.avatar.attached? %>
    <%= image_tag micropost.user.avatar, size: "50x50" %>
  <% else %>
    <%= image_tag("hodr_logo.png", size: "50x50") %>
  <% end %>
  <span class="user"><%= link_to micropost.user.uname, micropost.user, class: 'post_user_link' %></span>
  <span class="content post_content">
    <%= auto_link(simple_format(micropost.content), html: { target: '_blank' }) %>
  </span>
  <% micropost.images.each do |media| %>
    <% if media.content_type.start_with?('image/') %>
      <%= image_tag media, width: "100%" %>
    <% elsif media.content_type.start_with?('video/') %>
      <video width="320" height="240" controls>
        <source src="<%= url_for(media) %>" type="<%= media.content_type %>">
        Your browser does not support the video tag.
      </video>
    <% end %>
  <% end %>


  <span class="timestamp post_time">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
    <% if current_user?(micropost.user) %>
      <%= link_to "delete", micropost, data: { "turbo-method": :delete, turbo_confirm: "You sure?" }, class: 'delete_post_link' %>
    <% end %>
  </span>
  <%= render micropost.comments %>

  <%= form_with(model: [micropost, Comment.new], local: true) do |form| %>
    <%= form.text_area :content, placeholder: "Write a comment...", class: 'comment_text_area' %>
    <%= form.file_field :images, multiple: true, accept: 'image/png,image/jpeg' %>
    <%= form.submit "Post Comment", class: 'comment_submit_button' %>
  <% end %>
</li>
